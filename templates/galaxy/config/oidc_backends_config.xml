<?xml version="1.0"?>
<!--

This file shall be properly set for user authentication and authorization leveraging the OpenID Connect protocol.
Here we provide a quick reference for configuration setters, and we provide a complete documentation
at the following page:

    https://galaxyproject.org/authnz/config/oidc/



Quick Reference
_______________

- provider:         Sets the name of OpenID Connect (OIDC) Identity Provider (IdP).
                    Supported providers are listed below in the sample.

- client id:        Sets the id of this client (i.e., your Galaxy instance) with the IdP, which is
                    obtained from the IdP at client registration.
                    See: https://tools.ietf.org/html/rfc6749#section-2.2

- client secret:    A secret generated by IdP for your client upon its registration.
                    See https://tools.ietf.org/html/rfc6749#section-2.3.1

- label:            A label to identify this IDP to users in the UI. Defaults to the provider name if absent.

- icon:             Image to be displayed on the login button.

- require_create_confirmation:            A boolean value that decides whether a NewUserConfirmation page shows up.


IMPORTANT NOTES
_______________

While registering your client (i.e., your Galaxy instance), you would need to provide the IdP with a
`redirect_uri`: a URL at which the IdP will callback your Galaxy instance upon a successful user authentication.

This URL for your Galaxy instance is composed as:

    <host_url>/authnz/<provider>/callback


Some examples:

- using localhost to authenticate with Google:
    http://localhost:8080/authnz/google/callback

- using localhost to authenticate with Globus:
    http://localhost:8080/authnz/globus/callback

- using an instance hosted at `https://usegalaxy.org` with Google:
    https://usegalaxy.org/authnz/google/callback


Please mind `http` and `https`.

-->
<OIDC>
    <provider name="lifescience">
        <client_id>{{ elixir_aai.usegalaxy_eu.client_id }}</client_id>
        <client_secret>{{ elixir_aai.usegalaxy_eu.client_secret }}</client_secret>
        <redirect_uri>https://usegalaxy.eu/authnz/lifescience/callback</redirect_uri>
        <prompt>consent</prompt>
        <icon>https://lifescience-ri.eu/fileadmin/lifescience-ri/media/Images/button-login-small.png</icon>
        <!-- (Optional) Extra scopes you need to request for your implementation -->
        <extra_scopes>offline_access</extra_scopes>
    </provider>

    <!-- # Documentation is at https://doc.nfdi-aai.de/  
        https://infraproxy.nfdi-aai.dfn.de/idp/profile/oidc/configuration
    -->
    <provider name="nfdi">
        <client_id>{{ nfdi_aai.usegalaxy_eu.client_id }}</client_id>
        <client_secret>{{ nfdi_aai.usegalaxy_eu.client_secret }}</client_secret>
        <redirect_uri>https://usegalaxy.eu/authnz/nfdi/callback</redirect_uri>
        <prompt>consent</prompt>
        <well_known_oidc_config_uri>https://infraproxy.nfdi-aai.dfn.de/idp/profile/oidc/configuration</well_known_oidc_config_uri>
        <icon>https://doc.nfdi-aai.de/images/Logo_IAM4NFDI_lang_rgb.png</icon>
        <!-- (Optional) Extra scopes you need to request for your implementation -->
        <extra_scopes>offline_access</extra_scopes>
    </provider>

    <!--provider name="Keycloak">
        <url>https://auth.nfdi4plants.org/realms/dataplant</url>
        <client_id>{{ dataplant_keycloak.usegalaxy_eu.client_id }}</client_id>
        <client_secret>{{ dataplant_keycloak.usegalaxy_eu.client_secret }}</client_secret>
        <well_known_oidc_config_uri>https://auth.nfdi4plants.org/realms/dataplant/.well-known/openid-configuration</well_known_oidc_config_uri>
        <redirect_uri>https://usegalaxy.eu/authnz/keycloak/callback</redirect_uri>
        <prompt>consent</prompt>
        <icon>https://galaxyproject.eu/assets/media/DataPLANT_logo.png</icon>
    </provider-->

    <provider name="Keycloak">
        <url>https://proxy.testing.eosc-federation.eu</url>
        <client_id>{{ eosc_keycloak.usegalaxy_eu.client_id }}</client_id>
        <client_secret>{{ eosc_keycloak.usegalaxy_eu.client_secret }}</client_secret>
        <well_known_oidc_config_uri>https://proxy.testing.eosc-federation.eu/.well-known/openid-configuration</well_known_oidc_config_uri>
        <redirect_uri>https://usegalaxy.eu/authnz/keycloak/callback</redirect_uri>
        <prompt>consent</prompt>
        <icon>https://proxy.acc.myaccessid.org/logos/EU.svg</icon>
    </provider>


    <!-- Documentation: https://docs.egi.eu/providers/check-in/sp -->
    <provider name="egi_checkin">
       <!-- Client id and secret can be obtained by registering your client at EGI Check-in
            Federation Registry: https://aai.egi.eu/federation -->
        <client_id>{{ egi_checkin.usegalaxy_eu.client_id }}</client_id>
        <client_secret>{{ egi_checkin.usegalaxy_eu.client_secret }}</client_secret>
        <redirect_uri>https://usegalaxy.eu/authnz/egi_checkin/callback</redirect_uri>
        <icon>https://im.egi.eu/im-dashboard/static/images/egicheckin.png</icon>
        <prompt>consent</prompt>
        <!-- (Optional) Which Check-in environment to use (prod, demo, dev), default is prod -->
        <!-- <checkin_env>dev</checkin_env> -->
    </provider>
</OIDC>
